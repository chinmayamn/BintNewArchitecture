@model Bint.Models.AdminDashboard
@using System.Data
@{

    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<h2>Admin Dashboard</h2>
<div class="wrapper">
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper" style="margin-top:0px !important">
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1 class="m-0 text-dark"></h1>
                    </div><!-- /.col -->
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="/admin/dashboard"><i class="fas fa-home mr-2"></i>Home</a></li>
                            <li class="breadcrumb-item active">Admin Dashboard</li>
                        </ol>
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </div><!-- /.container-fluid -->
        </div>
        <!-- /.content-header -->
        <!-- Main content -->
        <section class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box-new">
                            <span class="info-box-icon-new bg-aqua"><i class="nav-icon fa fa-dollar-sign"></i></span>

                            <div class="info-box-content-new">
                                <span class="info-box-text-new">Total USD</span>
                                <span class="info-box-number-new">@Model.TotalUsd</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box-new">
                            <span class="info-box-icon-new bg-red"><i class="nav-icon fab fa-btc"></i></span>

                            <div class="info-box-content-new">
                                <span class="info-box-text-new">Total Bgc</span>
                                <span class="info-box-number-new">@Model.TotalBgc</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <!-- fix for small devices only -->
                    <div class="clearfix visible-sm-block"></div>

                    <div class="col-md-3 col-sm-6 col-xs-12">
                        <div class="info-box-new">
                            <span class="info-box-icon-new bg-green"><i class="fas fa-money-bill-alt"></i></span>

                            <div class="info-box-content-new">
                                <span class="info-box-text-new">Total Amount</span>
                                <span class="info-box-number-new">@(Model.TotalUsd + Model.TotalBgc)</span>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    @*<div class="col-md-3 col-sm-6 col-xs-12">
                <div class="info-box-new">
                    <span class="info-box-icon-new bg-yellow"><i class="fas fa-money-bill-alt"></i></span>

                    <div class="info-box-content-new">
                        <span class="info-box-text-new">Total Revenue</span>
                        <span class="info-box-number-new">2,000</span>
                    </div>
                    <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
            </div>*@
                    <!-- /.col -->
                </div>
                <div class="row">
                    <!-- BAR CHART -->
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header" style="border-top: 3px solid #3c8dbc">
                                <h3 class="card-title">Company revenue</h3>
                                <div class="card-tools">
                                    <a href="#" class="">View Report</a>
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="chart">
                                    <canvas id="barChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                                </div>
                            </div>
                            <!-- /.card-body -->
                        </div>
                    </div>
                    <!-- /.card -->
                </div>
                <!-- Info boxes -->
                <div class="row">


                    <div class="col-12 col-sm-6 col-md-3">
                        <div class="info-box">
                            <span class="info-box-icon bg-info elevation-1">
                                <a href="/Admin/Admin">
                                    <i class="fas fa-users"></i>
                                </a>
                            </span>
                            <div class="info-box-content">
                                <a href="/Admin/Admin">
                                    <span class="info-box-text">Admin</span>
                                    <span class="info-box-number">
                                        @Model.UserCount.AdminCount
                                    </span>
                                </a>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <div class="col-12 col-sm-6 col-md-3">
                        <div class="info-box mb-3">

                            <span class="info-box-icon bg-danger elevation-1">
                                <a href="/Admin/Investor">
                                    <i class="fas fa-users"></i>
                                </a>
                            </span>

                            <div class="info-box-content">
                                <a href="/Admin/Investor">
                                    <span class="info-box-text">Investors</span>
                                    <span class="info-box-number">
                                        @Model.UserCount.InvestorCount
                                    </span>
                                </a>
                            </div>

                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <!-- fix for small devices only -->
                    <div class="clearfix hidden-md-up"></div>
                    <div class="col-12 col-sm-6 col-md-3">
                        <div class="info-box mb-3">
                            <span class="info-box-icon bg-success elevation-1">
                                <a href="/Admin/Client">
                                    <i class="fas fa-users"></i>
                                </a>
                            </span>
                            <div class="info-box-content">
                                <a href="/Admin/Client">
                                    <span class="info-box-text">Clients</span>
                                    <span class="info-box-number">
                                        @Model.UserCount.ClientCount
                                    </span>
                                </a>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>
                    <!-- /.col -->
                    <div class="col-12 col-sm-6 col-md-3">
                        <div class="info-box mb-3">
                            <span class="info-box-icon bg-warning elevation-1">
                                <a href="/Admin/partner">
                                    <i class="fas fa-users"></i>
                                </a>
                            </span>
                            <div class="info-box-content">
                                <a href="/Admin/partner">
                                    <span class="info-box-text">Partners</span>
                                    <span class="info-box-number">
                                        @Model.UserCount.PartnerCount
                                    </span>
                                </a>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <!-- /.info-box -->
                    </div>

                    <!-- /.col -->
                    <!-- /.col -->
                    <div class="col-12 col-sm-6 col-md-3">

                        <!-- /.info-box -->
                    </div>

                    <!-- /.col -->
                    <!-- /.col -->
                    <div class="col-12 col-sm-6 col-md-3">

                        <!-- /.info-box -->
                    </div>

                    <!-- /.col -->

                </div>
                <!-- /.row -->
                <!-- /.row -->
                <!-- Small boxes (Stat box) -->
                @foreach (DataRow row in Model.AdminRequestDashboard.Rows)
                {
                    <div class="row">
                        <div class="col-lg-3 col-6">
                            <!-- small box -->
                            <div class="small-box bg-gradient-pink">
                                <div class="inner">
                                    <h3>@row["admindepositpending"]</h3>
                                    <p>Admin Deposit Requests</p>
                                </div>
                                <div class="icon">
                                    <i class="ion ion-bag"></i>
                                </div>
                                <a href="/admin/usddepositwithdraw" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                            </div>
                        </div>
                        <div class="col-lg-3 col-6">
                            <!-- small box -->
                            <div class="small-box bg-gradient-info">
                                <div class="inner">
                                    <h3>@row["investordepositpending"]</h3>
                                    <p>Investor Deposit Requests</p>
                                </div>
                                <div class="icon">
                                    <i class="ion ion-bag"></i>
                                </div>
                                <a href="/admin/usddepositwithdraw" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                            </div>
                        </div>
                        <div class="col-lg-3 col-6">
                            <!-- small box -->
                            <div class="small-box bg-gradient-warning">
                                <div class="inner">
                                    <h3>@row["partnerdepositpending"]</h3>
                                    <p>Partner Deposit Requests</p>
                                </div>
                                <div class="icon">
                                    <i class="ion ion-person-add"></i>
                                </div>
                                <a href="/admin/usddepositwithdraw" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                            </div>
                        </div>
                        <!-- ./col -->
                        <div class="col-lg-3 col-6">
                            <!-- small box -->
                            <div class="small-box bg-gradient-secondary">
                                <div class="inner">
                                    <h3>@row["clientdepositpending"]</h3>
                                    <p>Client Deposit Requests</p>
                                </div>
                                <div class="icon">
                                    <i class="ion ion-bag"></i>
                                </div>
                                <a href="/admin/usddepositwithdraw" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                            </div>
                        </div>

                        <!-- ./col -->
                    </div>
                    <!-- /.row -->
                    <div class="row">
                        <div class="col-lg-3 col-6">
                            <!-- small box -->
                            <div class="small-box bg-gradient-teal">
                                <div class="inner">
                                    <h3>@row["adminwithdrawpending"]</h3>
                                    <p>Admin Withdrawal Requests</p>
                                </div>
                                <div class="icon">
                                    <i class="ion ion-stats-bars"></i>
                                </div>
                                <a href="/admin/usddepositwithdraw" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                            </div>
                        </div>
                        <div class="col-lg-3 col-6">
                            <!-- small box -->
                            <div class="small-box bg-gradient-success">
                                <div class="inner">
                                    <h3>@row["investorwithdrawpending"]</h3>
                                    <p>Investor Withdrawal Requests</p>
                                </div>
                                <div class="icon">
                                    <i class="ion ion-stats-bars"></i>
                                </div>
                                <a href="/admin/usddepositwithdraw" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                            </div>
                        </div>
                        <!-- ./col -->
                        <!-- ./col -->
                        <!-- ./col -->
                        <div class="col-lg-3 col-6">
                            <!-- small box -->
                            <div class="small-box bg-gradient-danger">
                                <div class="inner">
                                    <h3>@row["partnerwithdrawpending"]</h3>
                                    <p>Partner Withdrawal Requests</p>
                                </div>
                                <div class="icon">
                                    <i class="ion ion-pie-graph"></i>
                                </div>
                                <a href="/admin/usddepositwithdraw" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                            </div>
                        </div>
                        <div class="col-lg-3 col-6">
                            <!-- small box -->
                            <div class="small-box bg-gradient-primary">
                                <div class="inner">
                                    <h3>@row["clientwithdrawpending"]</h3>
                                    <p>Client Withdrawal Requests</p>
                                </div>
                                <div class="icon">
                                    <i class="ion ion-stats-bars"></i>
                                </div>
                                <a href="/admin/usddepositwithdraw" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                            </div>
                        </div>
                        <!-- ./col -->


                    </div>
                }
                <div class="row">
                    <div class="col-md-4 col-sm-1">
                        <!-- USERS LIST -->
                        <div class="card">
                            <div class="card-header" style="border-top: 3px solid #dc3545">
                                <h3 class="card-title">Latest Investors</h3>
                                <div class="card-tools">

                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- /.card-header -->
                            <div class="card-body p-0">
                                <ul class="users-list clearfix">
                                    @foreach (var item in Model.UserCount.InvestorList)
                                    {
                                        var temp = @item.Firstname + ' ' + @item.Lastname;
                                        if (temp.Length > 12)
                                            temp = temp.Substring(0, 12) + "...";

                                        <li>
                                            <a href="/account/userprofile/@item.Id">
                                                <img src="@item.ProfilePicture" alt="User Image">
                                            </a>
                                            <a class="users-list-name" href="/account/userprofile/@item.Id">
                                                @temp
                                                <span class="users-list-date">@item.UserId</span>
                                            </a>
                                        </li>
                                    }

                                </ul>
                                <!-- /.users-list -->
                            </div>
                            <!-- /.card-body -->
                            <div class="card-footer text-center">
                                <a href="/admin/investor">View All Investors</a>
                            </div>
                            <!-- /.card-footer -->
                        </div>
                        <!--/.card -->
                    </div>
                    <div class="col-md-4 col-sm-1">
                        <!-- USERS LIST -->
                        <div class="card">
                            <div class="card-header" style="border-top: 3px solid #28a745">
                                <h3 class="card-title">Latest Partners</h3>
                                <div class="card-tools">

                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- /.card-header -->
                            <div class="card-body p-0">
                                <ul class="users-list clearfix">
                                    @foreach (var item in Model.UserCount.PartnerList)
                                    {
                                        var temp = @item.Firstname + ' ' + @item.Lastname;
                                        if (temp.Length > 12)
                                            temp = temp.Substring(0, 12) + "...";

                                        <li>
                                            <a href="/account/userprofile/@item.Id">
                                                <img src="@item.ProfilePicture" alt="User Image">
                                            </a>
                                            <a class="users-list-name" href="/account/userprofile/@item.Id">
                                                @temp
                                                <span class="users-list-date">@item.UserId</span>
                                            </a>
                                        </li>
                                    }

                                </ul>
                                <!-- /.users-list -->
                            </div>
                            <!-- /.card-body -->
                            <div class="card-footer text-center">
                                <a href="/admin/partner">View All Partners</a>
                            </div>
                            <!-- /.card-footer -->
                        </div>
                        <!--/.card -->
                    </div>
                    <div class="col-md-4 col-sm-1">
                        <!-- USERS LIST -->
                        <div class="card">
                            <div class="card-header" style="border-top: 3px solid #ffc107">
                                <h3 class="card-title">Latest Clients</h3>
                                <div class="card-tools">

                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <!-- /.card-header -->
                            <div class="card-body p-0">
                                <ul class="users-list clearfix">
                                    @foreach (var item in Model.UserCount.ClientList)
                                    {
                                        var temp = @item.Firstname + ' ' + @item.Lastname;
                                        if (temp.Length > 12)
                                            temp = temp.Substring(0, 12) + "...";

                                        <li>
                                            <a href="/account/userprofile/@item.Id">
                                                <img src="@item.ProfilePicture" alt="User Image">
                                            </a>
                                            <a class="users-list-name" href="/account/userprofile/@item.Id">
                                                @temp
                                                <span class="users-list-date">@item.UserId</span>
                                            </a>
                                        </li>
                                    }

                                </ul>
                                <!-- /.users-list -->
                            </div>
                            <!-- /.card-body -->
                            <div class="card-footer text-center">
                                <a href="/admin/client">View All Clients</a>
                            </div>
                            <!-- /.card-footer -->
                        </div>
                        <!--/.card -->
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4 col-sm-12">
                        <div class="info-box mb-3">
                            <span class="info-box-icon bg-secondary elevation-1">
                                <a href="/Admin/locked">
                                    <i class="fas fa-users"></i>
                                </a>
                            </span>
                            <div class="info-box-content">
                                <a href="/Admin/locked">
                                    <span class="info-box-text">Locked Users</span>
                                    <span class="info-box-number">
                                        @Model.UserCount.LockedUsersCount
                                    </span>
                                </a>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <div class="info-box mb-3">
                            <span class="info-box-icon bg-primary elevation-1">
                                <a href="/Admin/pendingaccess">
                                    <i class="fas fa-users"></i>
                                </a>
                            </span>
                            <div class="info-box-content">
                                <a href="/Admin/pendingaccess">
                                    <span class="info-box-text">Pending access</span>
                                    <span class="info-box-number">
                                        @Model.UserCount.PendingAccessCount
                                    </span>
                                </a>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <div class="info-box mb-3">
                            <span class="info-box-icon bg-warning elevation-1">
                                <a href="/Admin/pendingaccess">
                                    <i class="fas fa-users"></i>
                                </a>
                            </span>
                            <div class="info-box-content">
                                <a href="/Admin/pendingaccess">
                                    <span class="info-box-text">Pending Kyc</span>
                                    <span class="info-box-number">
                                        @Model.UserCount.PendingKYCCount
                                    </span>
                                </a>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                        <div class="info-box mb-3">
                            <span class="info-box-icon bg-fuchsia elevation-1">
                                <a href="/Admin/pendingaccess">
                                    <i class="fas fa-users"></i>
                                </a>
                            </span>
                            <div class="info-box-content">
                                <a href="/Admin/pendingaccess">
                                    <span class="info-box-text">Completed Groups</span>
                                    <span class="info-box-number">
                                        @Model.UserCount.PendingAccessCount
                                    </span>
                                </a>
                            </div>
                            <!-- /.info-box-content -->
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <p class="text-center">
                            <strong>Group completion</strong>
                        </p>
                        <div class="progress-group">
                            Group A
                            <span class="float-right"><b>7</b>/10</span>
                            <div class="progress progress-sm">
                                <div class="progress-bar bg-primary" style="width: 80%"></div>
                            </div>
                        </div>
                        <!-- /.progress-group -->
                        <div class="progress-group">
                            Group B
                            <span class="float-right"><b>4</b>/10</span>
                            <div class="progress progress-sm">
                                <div class="progress-bar bg-danger" style="width: 75%"></div>
                            </div>
                        </div>
                        <!-- /.progress-group -->
                        <div class="progress-group">
                            <span class="progress-text">Group C</span>
                            <span class="float-right"><b>5</b>/10</span>
                            <div class="progress progress-sm">
                                <div class="progress-bar bg-success" style="width: 60%"></div>
                            </div>
                        </div>
                        <!-- /.progress-group -->
                        <div class="progress-group">
                            Group D
                            <span class="float-right"><b>9</b>/10</span>
                            <div class="progress progress-sm">
                                <div class="progress-bar bg-warning" style="width: 50%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <div class="card card-outline card-danger">
                            <div class="card-header">
                                <h3 class="card-title">USD</h3>
                                <div class="card-tools">
                                    <a href="#">View Report</a>
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>

                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="donutUsersChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4 col-sm-12">
                    
                    </div>
                    <div class="col-md-4 col-sm-12">
                     
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <div class="card card-outline card-danger">
                            <div class="card-header">
                                <h3 class="card-title">BGC</h3>
                                <div class="card-tools">
                                    <a href="#">View Report</a>
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>

                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="donutUsersChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                        </div>
                    </div>
                </div>
            </div><!--/. container-fluid -->
        </section>
        <!-- /.content -->
    </div>
</div>
<!-- /.content-wrapper -->
<script src="~/Content/plugins/jquery/jquery.min.js"></script>
<script src="~/Content/dist/js/pages/dashboard2.js"></script>
<script type="text/javascript">
    $(document).ready(function () {

          /********************* area chart *********************************/
        var monthLabelArray = [];
        var monthUSD = [];
         @foreach (DataRow d in Model.UsdInvestmentMonthWise.Tables[0].Rows)
        {
            @:monthUSD.push('@d.ItemArray[0]');
        @:monthLabelArray.push('@d.ItemArray[1]');
        }
        console.log(monthLabelArray);
        console.log(monthUSD);
        var areaChartData = {
            labels: monthLabelArray,
            datasets: [
                {
                    label: 'BGC',
                    backgroundColor: '#e83e8c',
                    borderColor: 'rgba(210, 214, 222, 1)',
                    pointRadius: false,
                    pointColor: 'rgba(210, 214, 222, 1)',
                    pointStrokeColor: '#c1c7d1',
                    pointHighlightFill: '#fff',
                    pointHighlightStroke: 'rgba(220,220,220,1)',
                    data: [65, 59, 80, 81, 56, 55, 40, 65, 59, 80, 81, 56, 55, 40]
                },
                {
                    label: 'USD',
                    backgroundColor: '#6c757d',
                    borderColor: 'rgba(60,141,188,0.8)',
                    pointRadius: false,
                    pointColor: '#3b8bba',
                    pointStrokeColor: 'rgba(60,141,188,1)',
                    pointHighlightFill: '#fff',
                    pointHighlightStroke: 'rgba(60,141,188,1)',
                    data: monthUSD
                },


            ]
        }

    /********************* bar chart *********************************/

        var barChartCanvas = $('#barChart').get(0).getContext('2d')
        var barChartData = jQuery.extend(true, {}, areaChartData)
        var temp0 = areaChartData.datasets[0]
        var temp1 = areaChartData.datasets[1]
        //barChartData.datasets[0] = temp1
        barChartData.datasets[1] = temp1

        var barChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            datasetFill: false
        }

        var barChart = new Chart(barChartCanvas, {
            type: 'bar',
            data: barChartData,
            options: barChartOptions
        })

        /********************* donut chart *********************************/
        var donutOptions = {
            maintainAspectRatio: false,
            responsive: true,
        }
          //online users data
        var donutUserChartCanvas = $('#donutUsersChart').get(0).getContext('2d')
         var usersLabelArray = [];
        var usersCount = [];

        @foreach (var d in Model.UsdInvestment)
        {
            @:usersLabelArray.push('@d.Key');
        @:usersCount.push('@d.Value');
        }
        var donutUsersData = {
            labels: usersLabelArray,
            datasets: [
                {
                    data: usersCount,
                    backgroundColor: ['#f56954', '#00a65a', '#f39c12', '#00c0ef'],
                }
            ]
        }
        var donutUsersChart = new Chart(donutUserChartCanvas, {
            type: 'doughnut',
            data: donutUsersData,
            options: donutOptions
        })
    });

</script>

