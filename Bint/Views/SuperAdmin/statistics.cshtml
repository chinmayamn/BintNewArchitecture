@model Bint.Models.SavedStatsDashboard
@{
  
    Layout = "~/Views/Shared/_SuperAdminLayout.cshtml";
}

<link href="/assets/vendor/jvectormap/jquery-jvectormap-2.0.3.css" rel="stylesheet" />
<style type="text/css">

    .ibox {
        position: relative;
        margin-bottom: 25px;
        background-color: #fff;
        -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
    }

        .ibox .ibox-head {
            padding: 0 20px;
            border-bottom: 1px solid #eee;
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-pack: justify;
            -webkit-justify-content: space-between;
            -ms-flex-pack: justify;
            justify-content: space-between;
            -webkit-box-align: center;
            -webkit-align-items: center;
            -ms-flex-align: center;
            align-items: center;
            height: 50px;
        }

            .ibox .ibox-head .ibox-title {
                font-size: 16px;
                font-weight: 600;
            }

                .ibox .ibox-head .ibox-title small {
                    font-weight: 400;
                    font-size: 13px;
                    color: #777;
                }

                    .ibox .ibox-head .ibox-title small a {
                        color: inherit;
                    }

            .ibox .ibox-head .ibox-tools {
                position: relative;
            }

                .ibox .ibox-head .ibox-tools > a {
                    color: #aaa;
                    font-size: 14px;
                    padding: 0 6px;
                }

                    .ibox .ibox-head .ibox-tools > a:hover {
                        color: #6d7c85;
                    }

            .ibox .ibox-head .nav-tabs {
                margin: 0;
                border: 0;
                height: 100%;
            }

                .ibox .ibox-head .nav-tabs .nav-link {
                    height: 100%;
                    padding: .9rem 1rem;
                }

        .ibox .ibox-body {
            padding: 15px 20px 20px 20px;
        }

        .ibox .ibox-footer {
            padding: 10px 0;
            border-top: 1px solid #eee;
        }

        .ibox.ibox-fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: 0;
            z-index: 1005;
        }

            .ibox.ibox-fullscreen .fullscreen-link > i::before {
                content: "\f066";
            }

        .ibox.collapsed-mode .ibox-collapse > i::before {
            content: "\f067";
        }

    .ibox-primary .ibox-head {
        color: #fff;
        background-color: #3498db;
    }

        .ibox-primary .ibox-head .ibox-tools > a, .ibox-primary .ibox-head .ibox-tools > a:hover {
            color: #fff;
        }

    .ibox-success .ibox-head {
        color: #fff;
        background-color: #2ecc71;
    }

        .ibox-success .ibox-head .ibox-tools > a, .ibox-success .ibox-head .ibox-tools > a:hover {
            color: #fff;
        }

    .ibox-info .ibox-head {
        color: #fff;
        background-color: #23B7E5;
    }

        .ibox-info .ibox-head .ibox-tools > a, .ibox-info .ibox-head .ibox-tools > a:hover {
            color: #fff;
        }

    .ibox-warning .ibox-head {
        color: #fff;
        background-color: #F39C12;
    }

        .ibox-warning .ibox-head .ibox-tools > a, .ibox-warning .ibox-head .ibox-tools > a:hover {
            color: #fff;
        }

    .ibox-danger .ibox-head {
        color: #fff;
        background-color: #e74c3c;
    }

        .ibox-danger .ibox-head .ibox-tools > a, .ibox-danger .ibox-head .ibox-tools > a:hover {
            color: #fff;
        }

    .ibox-grey .ibox-head {
        color: #fff;
        background-color: #bdc3c7;
    }

        .ibox-grey .ibox-head .ibox-tools > a, .ibox-grey .ibox-head .ibox-tools > a:hover {
            color: #fff;
        }
</style>
<h2>Admin Dashboard</h2>
<div class="wrapper">
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper" style="margin-top:0px !important">
        <!-- Content Header (Page header) -->
        <div class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1 class="m-0 text-dark" style="display:inline-flex">
                            Live Feed &nbsp;
                            <div class="custom-control custom-switch custom-switch-off-default custom-switch-on-success">
                                <input type="checkbox" class="custom-control-input" id="chkStatus" />
                                <label class="custom-control-label" for="chkStatus" id="chkstatuslabel"></label>
                            </div>
                        </h1>
                    </div><!-- /.col -->
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="/superadmin/dashboard"><i class="fas fa-home mr-2"></i>Home</a></li>
                            <li class="breadcrumb-item active">Super Admin Dashboard</li>
                        </ol>
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </div><!-- /.container-fluid -->
        </div>
        <!-- /.content-header -->
        <!-- Main content -->
        <section class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-3 col-sm-12">
                        <!-- DONUT CHART -->
                        <div class="card card-outline card-danger">
                            <div class="card-header">
                                <h3 class="card-title">Browser</h3>
                                <div class="card-tools">
                                    <a href="#">View Report</a>
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="donutChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                        </div>
                        <!-- /.card -->

                    </div>
                    <div class="col-md-3 col-sm-12">
                        <!-- DONUT CHART -->
                        <div class="card card-outline card-danger">
                            <div class="card-header">
                                <h3 class="card-title">OS</h3>
                                <div class="card-tools">
                                    <a href="#">View Report</a>
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="donutOSChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                        </div>
                        <!-- /.card -->

                    </div>
                    <div class="col-md-3 col-sm-12">
                        <!-- DONUT CHART -->
                        <div class="card card-outline card-danger">
                            <div class="card-header">
                                <h3 class="card-title">Device</h3>
                                <div class="card-tools">
                                    <a href="#">View Report</a>
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="donutDeviceChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                        </div>
                        <!-- /.card -->

                    </div>
                    <div class="col-md-3 col-sm-12">
                        <!-- DONUT CHART -->
                        <div class="card card-outline card-danger">
                            <div class="card-header">
                                <h3 class="card-title">Session time</h3>
                                <div class="card-tools">
                                    <a href="#">View Report</a>
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="donutChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                        </div>
                        <!-- /.card -->

                    </div>
                    <div class="col-md-3 col-sm-12">
                        <!-- DONUT CHART -->
                        <!-- DONUT CHART -->
                        <div class="card card-outline card-danger">
                            <div class="card-header">
                                <h3 class="card-title">Online Users</h3>
                                <div class="card-tools">
                                    <a href="#">View Report</a>
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>

                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="donutUsersChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                        </div>
                        <!-- /.card -->

                    </div>
                    <div class="col-md-3 col-sm-12">
                        <!-- DONUT CHART -->
                        <div class="card card-outline card-danger">
                            <div class="card-header">
                                <h3 class="card-title">Internet data</h3>
                                <div class="card-tools">
                                    <a href="#">View Report</a>
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="donutIDataChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                        </div>
                        <!-- /.card -->

                    </div>
                    <div class="col-md-3 col-sm-12">
                        <!-- DONUT CHART -->
                        <div class="card card-outline card-danger">
                            <div class="card-header">
                                <h3 class="card-title">Mobile Brands</h3>
                                <div class="card-tools">
                                    <a href="#">View Report</a>
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                                </div>
                            </div>
                            <div class="card-body">
                                <canvas id="donutBrandChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                            </div>
                            <!-- /.card-body -->
                        </div>
                        <!-- /.card -->

                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="ibox">
                            <div class="ibox-head">
                                <div class="ibox-title">Visitors Statistics</div>
                            </div>
                            <div class="ibox-body">
                                <div id="world-map" style="height: 300px;"></div>
                                <table class="table table-striped m-t-20 visitors-table">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Country</th>
                                            <th>Visits</th>
                                            <th>IP</th>
                                            <th>Browser</th>
                                            <th>OS</th>
                                            <th>Device</th>
                                            <th>Session</th>
                                            <th>Internet</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                        <tr>
                                            <td></td>
                                            <td>
                                                <img class="m-r-10" src="/assets/img/flags/us.png" /> USA
                                            </td>
                                            <td>755</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td>
                                                <img class="m-r-10" src="/assets/img/flags/Canada.png" /> Canada
                                            </td>
                                            <td>700</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td>
                                                <img class="m-r-10" src="/assets/img/flags/India.png" /> India
                                            </td>
                                            <td>410</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td>
                                                <img class="m-r-10" src="/assets/img/flags/Australia.png" /> Australia
                                            </td>
                                            <td>304</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td>
                                                <img class="m-r-10" src="/assets/img/flags/Singapore.png" /> Singapore
                                            </td>
                                            <td>203</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td>
                                                <img class="m-r-10" src="/assets/img/flags/uk.png" /> UK
                                            </td>
                                            <td>202</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td>
                                                <img class="m-r-10" src="/assets/img/flags/UAE.png" /> UAE
                                            </td>
                                            <td>180</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-6">

                    </div>
                </div>
            </div><!--/. container-fluid -->
        </section>
        <!-- /.content -->
    </div>
</div>
<!-- /.content-wrapper -->
<script src="~/Content/plugins/jquery/jquery.min.js"></script>
<script src="~/Content/dist/js/pages/dashboard2.js"></script>
<script src="/assets/vendor/jvectormap/jquery-jvectormap-2.0.3.min.js" type="text/javascript"></script>
<script src="/assets/vendor/jvectormap/jquery-jvectormap-world-mill-en.js" type="text/javascript"></script>
<script src="/assets/vendor/jvectormap/jquery-jvectormap-us-aea-en.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var areaChartData = {
            labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
            datasets: [
                {
                    label: 'BTK',
                    backgroundColor: '#dc3545',
                    borderColor: 'rgba(210, 214, 222, 1)',
                    pointRadius: false,
                    pointColor: 'rgba(210, 214, 222, 1)',
                    pointStrokeColor: '#c1c7d1',
                    pointHighlightFill: '#fff',
                    pointHighlightStroke: 'rgba(220,220,220,1)',
                    data: [65, 59, 80, 81, 56, 55, 40, 65, 59, 80, 81, 56, 55, 40]
                },
                {
                    label: 'BGC',
                    backgroundColor: '#6c757d',
                    borderColor: 'rgba(60,141,188,0.8)',
                    pointRadius: false,
                    pointColor: '#3b8bba',
                    pointStrokeColor: 'rgba(60,141,188,1)',
                    pointHighlightFill: '#fff',
                    pointHighlightStroke: 'rgba(60,141,188,1)',
                    data: [28, 48, 40, 19, 86, 27, 90, 8, 48, 40, 19, 86, 27, 90]
                },

                {
                    label: 'Investment',
                    backgroundColor: '#ffc107',
                    borderColor: 'rgba(210, 214, 222, 1)',
                    pointRadius: false,
                    pointColor: 'rgba(210, 214, 222, 1)',
                    pointStrokeColor: '#c1c7d1',
                    pointHighlightFill: '#fff',
                    pointHighlightStroke: 'rgba(220,220,220,1)',
                    data: [48, 40, 19, 86, 27, 90, 40, 65, 59, 80, 81, 56, 22]
                },
            ]
        }
        // Get context with jQuery - using jQuery's .get() method.
        var donutChartCanvas = $('#donutChart').get(0).getContext('2d')
         var browserLabelArray = [];
        var browserCount = [];

        @foreach (var d in Model.Browser)
        {
            @:browserLabelArray.push("@d.BrowserName");
        @:browserCount.push("@d.UserId");
        }
        var donutData = {
            labels: browserLabelArray,
            datasets: [
                {
                    data: browserCount,
                    backgroundColor: ['#f39c12', '#00a65a', '#f56954', '#00c0ef', '#3c8dbc', '#d2d6de'],
                }
            ]
        }
        var donutOptions = {
            maintainAspectRatio: false,
            responsive: true,
        }
        //Create pie or douhnut chart
        // You can switch between pie and douhnut using the method below.
        var donutChart = new Chart(donutChartCanvas, {
            type: 'doughnut',
            data: donutData,
            options: donutOptions
        })



        //online users data
        var donutUserChartCanvas = $('#donutUsersChart').get(0).getContext('2d')
         var usersLabelArray = [];
        var usersCount = [];

        @foreach (var d in Model.URole)
        {
            @:usersLabelArray.push("@d.URole");
        @:usersCount.push("@d.UserId")
        }
        var donutUsersData = {
            labels: usersLabelArray,
            datasets: [
                {
                    data: usersCount,
                    backgroundColor: ['#f56954', '#00a65a', '#f39c12', '#00c0ef'],
                }
            ]
        }
        var donutUsersChart = new Chart(donutUserChartCanvas, {
            type: 'doughnut',
            data: donutUsersData,
            options: donutOptions
        })


        //internet data
        var donutIDataChartCanvas = $('#donutIDataChart').get(0).getContext('2d')
        var netLabelArray = [];
        var netCount = [];

        @foreach (var d in Model.WifiMobile)
        {
            @:netLabelArray.push("@d.PublicIp");
        @:netCount.push("@d.UserId")
        }

        var donutIDataData = {
            labels: netLabelArray,
            datasets: [
                {
                    data: netCount,
                    backgroundColor: ['#f56954', '#00a65a', '#f39c12', '#00c0ef'],
                }
            ]
        }
        var donutIDataChart = new Chart(donutIDataChartCanvas, {
            type: 'doughnut',
            data: donutIDataData,
            options: donutOptions
        })

        //OS chart
        var donutOSChartCanvas = $('#donutOSChart').get(0).getContext('2d')
        var osLabelArray = [];
        var osCount = [];

        @foreach (var d in Model.Os)
        {
            @:osLabelArray.push("@d.OsName");
        @:osCount.push("@d.UserId")
        }

        var donutOSData = {
            labels: osLabelArray,
            datasets: [
                {
                    data: osCount,
                    backgroundColor: ['#f56954', '#00a65a', '#f39c12', '#00c0ef', '#3c8dbc'],
                }
            ]
        }
        var donutOSChart = new Chart(donutOSChartCanvas, {
            type: 'doughnut',
            data: donutOSData,
            options: donutOptions
        })

        //device chart
        var donutDeviceChartCanvas = $('#donutDeviceChart').get(0).getContext('2d')
        var deviceLabelArray = [];
        var deviceCount = [];

        @foreach (var d in Model.DeviceName)
        {
            @:deviceLabelArray.push("@d.DeviceName");
        @:deviceCount.push("@d.UserId");
        }
        var donutDeviceData = {
            labels: deviceLabelArray ,
            datasets: [
                {
                    data: deviceCount,
                    backgroundColor: ['#3c8dbc','#f56954', '#00a65a', '#f39c12', '#00c0ef' ],
                }
            ]
        }
        var donutDeviceChart = new Chart(donutDeviceChartCanvas, {
            type: 'doughnut',
            data: donutDeviceData,
            options: donutOptions
        })

        //brand chart
          var donutBrandChartCanvas = $('#donutBrandChart').get(0).getContext('2d')
        var brandLabelArray = [];
        var brandCount = [];

        @foreach (var d in Model.BrandName)
        {
            @:brandLabelArray.push("@d.BrandName");
        @:brandCount.push("@d.UserId");
        }
        var donutBrandData = {
            labels: brandLabelArray ,
            datasets: [
                {
                    data: brandCount,
                    backgroundColor: ['#3c8dbc', '#f56954', '#00a65a', '#f39c12', '#00c0ef', '#ffa726', '#66bb6a', '#3c4858','#999'],
                }
            ]
        }
        var donutBrandChart = new Chart(donutBrandChartCanvas, {
            type: 'doughnut',
            data: donutBrandData,
            options: donutOptions
        })


        // World Map
        var mapData = {
            "US": 7402,
            'RU': 5105,
            "AU": 4700,
            "CN": 4650,
            "FR": 3800,
            "DE": 3780,
            "GB": 2400,
            "SA": 2350,
            "BR": 2270,
            "IN": 1870,
        }
        const Toast = Swal.mixin({
            toast: true,
            position: 'top-end',
            showConfirmButton: false,
            timer: 3000
        });

       
       
     



        var countryLabelArray = [];
        @foreach (var d in Model.PublicIp)
        {
            @:countryLabelArray.push("@d.PublicIp");

        }



        var student = [];
        var obj = {};

        var t = '';
        var ff=[{ "name": "mkyong", "age": 37 }, { "name": "fong", "age": 38 }];
        console.log(ff);
      
        for (i = 0; i < countryLabelArray.length; i++) {
                //  $.getJSON("https://ipapi.co/" + v + "/json/",
                $.getJSON("http://api.ipstack.com/223.186.151.130?access_key=e60569b200d9a3dab769032c25e0d7e0&format=1",
                    function (data) {
                        obj = ['{ latLng: [1.3, 103.8], name: "Singapore : 203" }'];
                      //  console.log(JSON.stringify(obj));
                        student.push(obj);
                        //  console.log(JSON.stringify(obj)); student.push(JSON.stringify(obj));
                    });
        }
      //  student.push(t);
    
        console.log(student.toString());
      //  console.log(typeof (student), typeof (obj), typeof (ff), Object.prototype.toString.call(ff), Object.prototype.toString.call(obj), Object.prototype.toString.call(student));


        var aa =
        [
            {
                "latLng": ["1.3", "103.8"],
                "name": "Singapore : 203"
            }
            //{
            //    latLng: [38, -105],
            //    name: 'USA : 755',
            //},
            //{
            //    latLng: [58, -115],
            //    name: 'Canada : 700',
            //},
            //{
            //    latLng: [-25, 140],
            //    name: 'Australia : 304',
            //},
            //{
            //    latLng: [55.00, -3.50],
            //    name: 'UK : 202',
            //},
            //{
            //    latLng: [12, 77],
            //    name: 'India : 410',
            //},
            //{
            //    latLng: [25.00, 54.00],
            //    name: 'UAE : 180',
            //}
        ];
       // alert(aa);

        $('#world-map').vectorMap({
            map: 'world_mill_en',
            backgroundColor: 'transparent',
            regionStyle: {
                initial: {
                    fill: '#DADDE0',
                }
            },
            showTooltip: true,
            onRegionTipShowx: function(e, el, code) {
                el.html(el.html() + ' (Visits - ' + mapData[code] + ')');
            },
            markerStyle: {
                initial: {
                    fill: '#3498db',
                    stroke: '#333'
                }
            },
            markers: aa
    });

    });

</script>

    